<% layout("layouts/boilerplate") %>
<link rel="stylesheet" href="/css/index.css">
   <div id="filters">
    <div class="filter">
       <div><i class="fa-solid fa-fire"></i></div>
       <p>Trending</p>
    </div>

<div class="filter">
       <div><i class="fa-solid fa-bed"></i></div>
       <p>Rooms</p>
    </div>

<div class="filter">
       <div><i class="fa-solid fa-mountain-city"></i></div>
       <p>Iconic cities</p>
    </div>



    <div class="filter">
       <div><i class="fa-brands fa-alipay"></i></div>
       <p>Castles</p>
    </div>


    <div class="filter">
       <div><i class="fa-solid fa-person-swimming"></i></div>
       <p>Amazing pools</p>
    </div>



<div class="filter">
       <div><i class="fa-solid fa-building-wheat"></i></div>
       <p>Farms</p>
    </div>


<div class="filter">
       <div><i class="fa-solid fa-snowflake"></i></div>
       <p>Arctic</p>
    </div>


<div class="filter">
       <div><i class="fa-solid fa-umbrella-beach"></i></div>
       <p>Beach</p>
    </div>
     

    <div class="tax-toogle">
      <div class="form-check-reverse form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
      <label class="form-check-label" for="switchCheckDefault">Display total before taxes</label>
    </div>

    </div>



 </div>
<div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3">
    <% for(listing of allListings ){%>
        <a href="/listings/<%=listing._id%>" class="listing-link">
    <div class="card listing-card mt-2" >
      <img src="<%= listing.image.url %>"  class="card-img-top" alt="listing" style="height: 20rem;">
      <div class="card-img-overlay">
        <div class=" heart-icon">&#9825;</div>
        
      </div>
      

      <div class="card-body">
       <p class="card-text">
      <b><%= listing.title %></b> <br>
       â‚¹
       <span class="listing-price" data-original="<%= listing.price %>">
       <%=(listing.price || 0).toLocaleString("en-IN") %>
       </span>
       <span class="gst-added" style="display:none; color:gray;">
       (18% GST added)
       </span>
       /night
       </p>
       </div>


</div>
</a>
<%}%>
</div>
 









<script>
  const toggleSwitch = document.getElementById("switchCheckDefault");
  const prices = document.querySelectorAll(".listing-price");
  const gstTexts = document.querySelectorAll(".gst-added");

  toggleSwitch.addEventListener("change", function () {

    prices.forEach((priceTag, index) => {
      const originalPrice = parseFloat(priceTag.dataset.original);

      if (toggleSwitch.checked) {
        const gstPrice = originalPrice + (originalPrice * 0.18);
        priceTag.innerText = gstPrice.toLocaleString("en-IN");
        gstTexts[index].style.display = "inline";
      } else {
        priceTag.innerText = originalPrice.toLocaleString("en-IN");
        gstTexts[index].style.display = "none";
      }

    });

  });
</script>


